(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{134:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(12),l=a.n(c),r=(a(63),a(13)),s=a(14),i=a(16),d=a(15),m=a(17),h=(a(64),a(65),a(6)),u=a.n(h),p=a(28),f=a.n(p),E=a(55),b=a(24),v=a(20),w=a.n(v),g=a(9),C=a.n(g),S=a(3),k=a.n(S),y=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={host:"",username:"",password:""},a.handleNewConnection=function(){var e={host:a.state.host,username:a.state.username,password:a.state.password};a.props.onSuccessConnection(e),a.setState({host:"",username:"",password:""})},a.handleHost=function(e){a.setState({host:e.target.value})},a.handleUsername=function(e){a.setState({username:e.target.value})},a.handlePassword=function(e){a.setState({password:e.target.value})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(C.a,{show:this.props.show,onHide:function(){return e.props.onClose()}},o.a.createElement(C.a.Header,{closeButton:!0},o.a.createElement(C.a.Title,null,"Add new connection")),o.a.createElement(C.a.Body,null,o.a.createElement(k.a,null,o.a.createElement(k.a.Group,{controlId:"formBasicEmail"},o.a.createElement(k.a.Label,null,"Host"),o.a.createElement(k.a.Control,{type:"input",placeholder:"Enter host",onChange:this.handleHost,value:this.state.host})),o.a.createElement(k.a.Group,{controlId:"formBasicEmail"},o.a.createElement(k.a.Label,null,"Username"),o.a.createElement(k.a.Control,{type:"input",placeholder:"Username",onChange:this.handleUsername,value:this.state.username})),o.a.createElement(k.a.Group,{controlId:"formBasicPassword"},o.a.createElement(k.a.Label,null,"Password"),o.a.createElement(k.a.Control,{type:"password",placeholder:"Password",onChange:this.handlePassword,value:this.state.password})))),o.a.createElement(C.a.Footer,null,o.a.createElement(w.a,{variant:"secondary",onClick:function(){return e.props.onClose()}},"Close"),o.a.createElement(w.a,{variant:"primary",onClick:this.handleNewConnection},"Add connection"))))}}]),t}(n.Component),N=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(C.a,{show:this.props.show,onHide:function(){return e.props.onClose()}},o.a.createElement(C.a.Header,{closeButton:!0},o.a.createElement(C.a.Title,null,"Add new connection")),o.a.createElement(C.a.Body,null,o.a.createElement(k.a,null,o.a.createElement(k.a.Group,{controlId:"formBasicEmail"},o.a.createElement(k.a.Label,null,"Host"),o.a.createElement(k.a.Control,{type:"input",placeholder:"Enter host",onChange:this.props.handleHost,value:this.props.data.host})),o.a.createElement(k.a.Group,{controlId:"formBasicEmail"},o.a.createElement(k.a.Label,null,"Username"),o.a.createElement(k.a.Control,{type:"input",placeholder:"Username",onChange:this.props.handleUsername,value:this.props.data.username})),o.a.createElement(k.a.Group,{controlId:"formBasicPassword"},o.a.createElement(k.a.Label,null,"Password"),o.a.createElement(k.a.Control,{type:"password",placeholder:"Password",onChange:this.props.handlePassword,value:this.props.data.password})))),o.a.createElement(C.a.Footer,null,o.a.createElement(w.a,{variant:"secondary",onClick:function(){return e.props.onClose()}},"Close"),o.a.createElement(w.a,{variant:"primary",onClick:this.props.onSuccessConnection},"Add connection"))))}}]),t}(n.Component),P=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).state={connections:[],openModal:!1,openEditModal:!1,editData:{host:"",username:"",password:""}},a.componentDidMount=function(){a.loadBooks().then(function(e){return console.log(e)})},a.handleModal=function(){a.setState({openModal:!1,openEditModal:!1})},a.handleNewSuccessConnection=function(e){var t=a.state.connections;u.a.post("/api/connections",e).then(function(e){t.push(e.data.message),a.setState({connections:t,openModal:!1})})},a.handleUpdateSuccessConnection=function(){u.a.put("/api/connections",a.state.editData).then(function(e){return a.setState({connections:e.data.connections})}),a.setState({openEditModal:!1})},a.handleRemoveConnection=function(e){u.a.delete("/api/connections",{data:{id:e}}).then(function(t){var n=a.state.connections.filter(function(t){return t.id!==e});a.setState({connections:n},a.props.reset())})},a.handleSelectConnection=function(e){a.props.onChange(e)},a.handleEditModal=function(e){u.a.get("/api/connections?id=".concat(e)).then(function(e){console.log(e.data.connection),a.setState({editData:e.data.connection})}),a.setState({openEditModal:!0})},a.handleHost=function(e){a.setState({editData:Object(b.a)({},a.state.editData,{host:e.target.value})})},a.handleUsername=function(e){a.setState({editData:Object(b.a)({},a.state.editData,{username:e.target.value})})},a.handlePassword=function(e){a.setState({editData:Object(b.a)({},a.state.editData,{password:e.target.value})})},a.render=function(){return o.a.createElement("nav",{className:"col-md-2 d-none d-md-block bg-light sidebar"},o.a.createElement("div",{className:"sidebar-sticky"},o.a.createElement(y,{show:a.state.openModal,onClose:a.handleModal,onSuccessConnection:a.handleNewSuccessConnection}),o.a.createElement(N,{show:a.state.openEditModal,onClose:a.handleModal,onSuccessConnection:a.handleUpdateSuccessConnection,handleHost:a.handleHost,handleUsername:a.handleUsername,handlePassword:a.handlePassword,data:a.state.editData}),o.a.createElement("h6",{className:"d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},o.a.createElement("h5",null,"Connections:"),o.a.createElement("button",{type:"button",className:"btn btn-link",onClick:function(){return a.setState({openModal:!0})}},o.a.createElement("span",{className:"fas fa-plus-circle"}))),o.a.createElement("ul",{className:"nav flex-column mb-2"},a.state.connections.map(function(e,t){return o.a.createElement("li",{className:"nav-item"},o.a.createElement("a",{className:t===a.props.connectionId?"selected nav-link":"nav-link",href:"#",onClick:function(){return a.handleSelectConnection(t)}},e.host,o.a.createElement("div",{className:"float-right"},o.a.createElement("span",{className:"fas fa-edit",onClick:function(){return a.handleEditModal(e.id)}}),o.a.createElement("span",{className:"fas fa-minus-circle",onClick:function(){return a.handleRemoveConnection(e.id)}}))))}))))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"loadBooks",value:function(){var e=Object(E.a)(f.a.mark(function e(){var t,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("/api/connections");case 2:200===(t=e.sent).status&&(a=t.data.connections,console.log(a),this.setState({connections:a}));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(n.Component);function j(e){return o.a.createElement("nav",{"aria-label":"breadcrumb"},o.a.createElement("ol",{className:"breadcrumb"},o.a.createElement("li",{className:"breadcrumb-item ".concat(0===e.path.length?"active":"")},0===e.path.length?"Home":o.a.createElement("a",{href:"#",onClick:function(){return e.handleSpecifyPath(0)}},"Home")),e.path.map(function(t,a){return o.a.createElement("li",{className:"breadcrumb-item ".concat(a+1===e.path.length?"active":"")},a+1===e.path.length?t:o.a.createElement("a",{href:"#",onClick:function(){return e.handleSpecifyPath(a)}},t))})))}function O(e){return o.a.createElement("nav",{className:"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow"},o.a.createElement("a",{className:"navbar-brand col-sm-3 col-md-2 mr-0",href:"#"},"SFTP Manager"),null===e.connectionId?o.a.createElement(o.a.Fragment,null):o.a.createElement(j,{path:e.path,handleSpecifyPath:e.handleSpecifyPath}),o.a.createElement("ul",{className:"navbar-nav px-3"},o.a.createElement("li",{className:"nav-item text-nowrap"},o.a.createElement("a",{className:"nav-link",href:"#",onClick:function(){return u.a.delete("/api/connections?all=true")}},"Clear connections"))))}var I=a(29),x=a.n(I),B=a(56),M=a.n(B);function F(e){return-1===e.connectionId?o.a.createElement("div",{className:"col-lg-6 col-md-6 col-sm-6 col-xs-6 offset-3 float-md-center"},o.a.createElement(x.a,{className:"align-items-center"},o.a.createElement("h1",null,e.error),o.a.createElement("p",null,"Edit the connection or select another."))):null===e.connectionId?o.a.createElement("div",{className:"col-lg-6 col-md-6 col-sm-6 col-xs-6 offset-3 float-md-center"},o.a.createElement(x.a,{className:"align-items-center"},o.a.createElement("h1",null,"No connection selected"),o.a.createElement("p",null,"Please, select the connection at the sidebar."))):e.tree===[]?o.a.createElement(M.a,{animation:"border",variant:"secondary"}):o.a.createElement("table",{className:"table"},o.a.createElement("thead",{className:"thead-light"},o.a.createElement("tr",null,o.a.createElement("th",{scope:"col"},"File"))),o.a.createElement("tbody",null,0===e.path.length?o.a.createElement(o.a.Fragment,null):o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("a",{href:"#",onClick:e.handleBackPath},o.a.createElement("span",{style:{fontSize:"2rem",paddingRight:"1rem"},className:"fas fa-folder-open"}),"..")),o.a.createElement("td",null)),e.tree.map(function(t){var a=t.includes(".");return o.a.createElement("tr",null,o.a.createElement("td",{className:"files"},a?o.a.createElement(o.a.Fragment,null,o.a.createElement("a",{href:"/api/download?path=".concat(e.path.join("/"),"/").concat(t),target:"_blank"},o.a.createElement("span",{style:{fontSize:"2rem",paddingRight:"1rem"},className:"fas fa-file"}),t)):o.a.createElement(o.a.Fragment,null,o.a.createElement("a",{href:"#",onClick:function(){return e.handleAddPath(t)}},o.a.createElement("span",{style:{fontSize:"2rem",paddingRight:"1rem"},className:"fas fa-folder"}),t))))})))}u.a.create([u.a.defaults.xsrfCookieName="csrftoken"],[u.a.defaults.xsrfHeaderName="X-CSRFToken"]);u.a.create({headers:{"X-CSRFToken":"csrfToken"}});var H=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={connectionId:null,path:[],tree:[],error:""},a.handleConnection=function(e){a.setState({connectionId:e}),u.a.post("/api/connect",{id:e}).then(function(e){u.a.post("/api/browser").then(function(e){a.setState({tree:e.data.tree})})}).catch(function(e){a.setState({error:e.response.data.error,connectionId:-1})})},a.handleAddPath=function(e){var t=a.state.path;t.push(e),a.setState({path:t}),u.a.post("/api/browser",{path:t}).then(function(e){console.log(e.data.tree),a.setState({tree:e.data.tree})})},a.handleBackPath=function(){var e=a.state.path;e.pop(),a.setState({path:e}),u.a.post("/api/browser",{path:e}).then(function(e){console.log(e.data.tree),a.setState({tree:e.data.tree})})},a.handleSpecifyPath=function(e){var t=a.state.path;t=t.slice(0,e+1),a.setState({path:t}),u.a.post("/api/browser",{path:t}).then(function(e){a.setState({tree:e.data.tree})})},a.handleDownloadFile=function(e){var t=a.state.path;t.push(e),a.setState({path:t}),u.a.get("/api/download?path=".concat(t.join("/")))},a.resetConnectionId=function(){a.setState({connectionId:null})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(O,{path:this.state.path,handleSpecifyPath:this.handleSpecifyPath,connectionId:this.state.connectionId}),o.a.createElement(P,{connectionId:this.state.connectionId,onChange:this.handleConnection,reset:this.resetConnectionId}),o.a.createElement("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 px-4"},o.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},o.a.createElement(F,{connectionId:this.state.connectionId,path:this.state.path,tree:this.state.tree,handleAddPath:this.handleAddPath,handleBackPath:this.handleBackPath,handleDownloadFile:this.handleDownloadFile,error:this.state.error}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},57:function(e,t,a){e.exports=a(134)},63:function(e,t,a){},65:function(e,t,a){}},[[57,1,2]]]);
//# sourceMappingURL=main.213e5a6a.chunk.js.map